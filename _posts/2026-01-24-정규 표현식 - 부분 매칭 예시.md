---
layout: post
title: 정규 표현식 - 부분 매칭 예시
author: nowpassion
date: 2026-01-24
tags: "손에_잡히는_10분_정규_표현식"
toc : false
---
## 앵커 없는 정규 표현식의 부분 매칭

`(\()?\d{3}(?(1)\)|-)\d{3}-\d{4}` (앵커 없는 버전)이 `(123-456-7890`에 매칭되는 이유는 **부분 매칭**이 가능하기 때문임.

## 매칭 과정 분석

### 첫 번째 매칭 시도 (실패)

1. 위치 0에서 시작: `(123-456-7890`
2. `(\()?` → `(` 매칭 ✅ (그룹 1 캡처됨)
3. `\d{3}` → `123` 매칭 ✅
4. `(?(1)\)|-)` → `)` 요구, 실제는 `-` ❌ **실패**

### 두 번째 매칭 시도 (성공!)

정규 표현식 엔진은 포기하지 않고 **다음 위치**에서 다시 시도함:

1. 위치 1에서 시작: `123-456-7890` (여는 괄호 건너뜀)
2. `(\()?` → 선택적이므로 매칭 안함 ❌ (그룹 1 캡처 안됨)
3. `\d{3}` → `123` 매칭 ✅
4. `(?(1)\)|-)` → 그룹 1이 없으므로 `-` 요구, 실제도 `-` ✅
5. `\d{3}` → `456` 매칭 ✅
6. `-` → `-` 매칭 ✅
7. `\d{4}` → `7890` 매칭 ✅

**결과**: `123-456-7890` 부분이 매칭됨!

## 앵커의 차이점

### 앵커 없음: `(\()?\d{3}(?(1)\)|-)\d{3}-\d{4}`

```text
입력: (123-456-7890
      ^ ← 시작 위치에서 실패
       ^^^^^^^^^^^^ ← 위치 1에서 성공! (부분 매칭)
```

- 문자열의 **어느 위치에서든** 매칭을 시도할 수 있음
- `(123-456-7890`에서 앞의 `(`를 건너뛰고 `123-456-7890` 부분만 매칭

### 앵커 있음: `^(\()?\d{3}(?(1)\)|-)\d{3}-\d{4}$`

```text
입력: (123-456-7890
      ^ ← 반드시 여기서 시작
               ^ ← 반드시 여기서 끝
```

- `^`는 문자열 **시작**에서만 매칭 시작
- `$`는 문자열 **끝**에서만 매칭 종료
- 부분 매칭 불가능, 전체 문자열이 패턴과 정확히 일치해야 함

## 시각적 비교

| 입력 | 앵커 없음 | 앵커 있음 |
| :--- | :--- | :--- |
| `(123-456-7890` | ✅ `123-456-7890` 매칭 | ❌ 전체가 불일치 |
| `Call (123)456-7890` | ✅ `(123)456-7890` 매칭 | ❌ 전체가 불일치 |
| `123-456-7890` | ✅ `123-456-7890` 매칭 | ✅ 전체 일치 |
| `(123)456-7890` | ✅ `(123)456-7890` 매칭 | ✅ 전체 일치 |

## 결론

앵커 없는 패턴은 문자열 내 어디서든 패턴을 찾을 수 있음.\
 `(123-456-7890`에서 앞의 잘못된 `(`를 무시하고 뒤의 `123-456-7890` 부분을 찾아낼 수 있음.\
이것이 **검색**과 **검증**의 차이임.
